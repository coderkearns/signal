{
  "version": 3,
  "sources": ["index.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.effect = exports.s = exports.use = void 0;\nvar _signals = null;\nfunction use(value) {\n    var subscribers = [];\n    var signal = {\n        get: function () {\n            if (_signals !== null && !(_signals.includes(signal.subscribe))) {\n                _signals.push(signal.subscribe);\n            }\n            return value;\n        },\n        get $() {\n            return signal.get();\n        },\n        set: function (newValue) {\n            value = newValue;\n            subscribers.forEach(function (callback) { return callback(); });\n        },\n        subscribe: function (callback) {\n            subscribers.push(callback);\n            return function () {\n                subscribers.splice(subscribers.indexOf(callback), 1);\n            };\n        },\n        destroy: function () { },\n        valueOf: function () {\n            return signal.get();\n        },\n        toString: function () {\n            return \"\".concat(signal.get());\n        }\n    };\n    return signal;\n}\nexports.use = use;\nfunction s(signal) {\n    return signal.get();\n}\nexports.s = s;\nfunction effect(fn) {\n    _signals = [];\n    var signal = use(fn());\n    var recompute = function () { return signal.set(fn()); };\n    var unsubscribers = _signals.map(function (s) { return s(recompute); });\n    signal.destroy = function () {\n        unsubscribers.forEach(function (u) { return u(); });\n    };\n    _signals = null;\n    return signal;\n}\nexports.effect = effect;\n"],
  "mappings": "aACA,OAAO,eAAe,QAAS,aAAc,CAAE,MAAO,EAAK,CAAC,EAC5D,QAAQ,OAAS,QAAQ,EAAI,QAAQ,IAAM,OAC3C,IAAI,SAAW,KACf,SAAS,IAAIA,EAAO,CAChB,IAAIC,EAAc,CAAC,EACfC,EAAS,CACT,IAAK,UAAY,CACb,OAAI,WAAa,MAAQ,CAAE,SAAS,SAASA,EAAO,SAAS,GACzD,SAAS,KAAKA,EAAO,SAAS,EAE3BF,CACX,EACA,IAAI,GAAI,CACJ,OAAOE,EAAO,IAAI,CACtB,EACA,IAAK,SAAUC,EAAU,CACrBH,EAAQG,EACRF,EAAY,QAAQ,SAAUG,EAAU,CAAE,OAAOA,EAAS,CAAG,CAAC,CAClE,EACA,UAAW,SAAUA,EAAU,CAC3B,OAAAH,EAAY,KAAKG,CAAQ,EAClB,UAAY,CACfH,EAAY,OAAOA,EAAY,QAAQG,CAAQ,EAAG,CAAC,CACvD,CACJ,EACA,QAAS,UAAY,CAAE,EACvB,QAAS,UAAY,CACjB,OAAOF,EAAO,IAAI,CACtB,EACA,SAAU,UAAY,CAClB,MAAO,GAAG,OAAOA,EAAO,IAAI,CAAC,CACjC,CACJ,EACA,OAAOA,CACX,CACA,QAAQ,IAAM,IACd,SAAS,EAAEA,EAAQ,CACf,OAAOA,EAAO,IAAI,CACtB,CACA,QAAQ,EAAI,EACZ,SAAS,OAAOG,EAAI,CAChB,SAAW,CAAC,EACZ,IAAIH,EAAS,IAAIG,EAAG,CAAC,EACjBC,EAAY,UAAY,CAAE,OAAOJ,EAAO,IAAIG,EAAG,CAAC,CAAG,EACnDE,EAAgB,SAAS,IAAI,SAAUC,EAAG,CAAE,OAAOA,EAAEF,CAAS,CAAG,CAAC,EACtE,OAAAJ,EAAO,QAAU,UAAY,CACzBK,EAAc,QAAQ,SAAU,EAAG,CAAE,OAAO,EAAE,CAAG,CAAC,CACtD,EACA,SAAW,KACJL,CACX,CACA,QAAQ,OAAS",
  "names": ["value", "subscribers", "signal", "newValue", "callback", "fn", "recompute", "unsubscribers", "s"]
}

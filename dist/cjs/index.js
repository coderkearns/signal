"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.derived=exports.effect=exports.use=void 0;var _root=null,signalProto={set:function(r){this._value=r,this._subscribers.forEach(function(t){return t()})},subscribe:function(r){var t=this;return this._subscribers.push(r),function(){t._subscribers.splice(t._subscribers.indexOf(r),1)}},destroy:function(){},valueOf:function(){return this()},toString:function(){return"".concat(this())}};function use(r){var t=function(){return _root!==null&&_root.push(this),this._value};return Object.assign(t,signalProto,{_value:r,_subscribers:[]}),t}exports.use=use;function withRoot(r){var t=_root;_root=[];var n=r(),e=_root;return _root=t,{signals:e,ret:n}}function effect(r){var t=withRoot(r).signals,n=t.map(function(e){return e.subscribe(r)});return function(){return n.forEach(function(e){return e()})}}exports.effect=effect;function derived(r){var t=withRoot(r),n=t.signals,e=t.ret,s=use(e),i=function(){return s.set(r())},o=n.map(function(u){return u.subscribe(i)});return s.destroy=function(){return o.forEach(function(u){return u()})},s}exports.derived=derived;
//# sourceMappingURL=index.js.map
